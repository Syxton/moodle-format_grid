{"version":3,"file":"thegrid.min.js","sources":["../src/thegrid.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JS module for the course homepage.\n *\n * @module      core_course/view\n * @copyright   2021 Jun Pataleta <jun@moodle.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport jQuery from 'jquery';\nimport log from 'core/log';\n\n/**\n * Whether the event listener has already been registered for this module.\n *\n * @type {boolean}\n */\nlet registered = false;\n\n/**\n * Function to intialise and register event listeners for this module.\n *\n * @param {array} sectionnumbers Show completion is on.\n */\nexport const init = (sectionnumbers) => {\n    log.debug('Grid thegrid JS init');\n    if (registered) {\n        log.debug('Grid thegrid JS init already registered');\n        return;\n    } else {\n        log.debug('Grid thegrid sectionnumbers ' + sectionnumbers);\n    }\n    registered = true;\n\n    var currentsection = -1;\n    var endsection = sectionnumbers.length - 1;\n\n    jQuery(document).on('keydown', function(event) {\n        if (event.which == 37) {\n            // Left.\n            event.preventDefault();\n            if ((currentsection == -1) || (currentsection == 0)) {\n                if (currentsection == 0) {\n                    jQuery('#section-' + sectionnumbers[currentsection]).removeClass('grid-current-section');\n                }\n                currentsection = endsection;\n                jQuery('#section-' + sectionnumbers[currentsection]).addClass('grid-current-section');\n            } else {\n                jQuery('#section-' + sectionnumbers[currentsection]).removeClass('grid-current-section');\n                currentsection = currentsection - 1;\n                jQuery('#section-' + sectionnumbers[currentsection]).addClass('grid-current-section');\n            }\n            log.debug(\"Left: \" + sectionnumbers[currentsection]);\n        } else if (event.which == 39) {\n            // Right.\n            event.preventDefault();\n            if ((currentsection == -1) || (currentsection == endsection)) {\n                if (currentsection == endsection) {\n                    jQuery('#section-' + sectionnumbers[currentsection]).removeClass('grid-current-section');\n                }\n                currentsection = 0;\n                jQuery('#section-' + sectionnumbers[currentsection]).addClass('grid-current-section');\n            } else {\n                jQuery('#section-' + sectionnumbers[currentsection]).removeClass('grid-current-section');\n                currentsection = currentsection + 1;\n                jQuery('#section-' + sectionnumbers[currentsection]).addClass('grid-current-section');\n            }\n            log.debug(\"Right: \" + sectionnumbers[currentsection]);\n        } else if ((event.which == 13) || (event.which == 27)) {\n            event.preventDefault();\n            //var trigger = jQuery(event.currentTarget);\n            //currentsection = trigger.data('section');\n            jQuery('#gridPopup').modal('show');\n        }\n    });\n};\n"],"names":["registered","sectionnumbers","debug","currentsection","endsection","length","document","on","event","which","preventDefault","removeClass","addClass","modal"],"mappings":";;;;;;;gKA+BIA,YAAa,gBAOIC,iCACbC,MAAM,wBACNF,wBACIE,MAAM,6DAGNA,MAAM,+BAAiCD,gBAE/CD,YAAa,MAETG,gBAAkB,EAClBC,WAAaH,eAAeI,OAAS,sBAElCC,UAAUC,GAAG,WAAW,SAASC,OACjB,IAAfA,MAAMC,OAEND,MAAME,kBACkB,GAAnBP,gBAA4C,GAAlBA,gBACL,GAAlBA,oCACO,YAAcF,eAAeE,iBAAiBQ,YAAY,wBAErER,eAAiBC,+BACV,YAAcH,eAAeE,iBAAiBS,SAAS,8CAEvD,YAAcX,eAAeE,iBAAiBQ,YAAY,wBACjER,gBAAkC,sBAC3B,YAAcF,eAAeE,iBAAiBS,SAAS,sCAE9DV,MAAM,SAAWD,eAAeE,kBACd,IAAfK,MAAMC,OAEbD,MAAME,kBACkB,GAAnBP,gBAA0BA,gBAAkBC,YACzCD,gBAAkBC,gCACX,YAAcH,eAAeE,iBAAiBQ,YAAY,wBAErER,eAAiB,sBACV,YAAcF,eAAeE,iBAAiBS,SAAS,8CAEvD,YAAcX,eAAeE,iBAAiBQ,YAAY,wBACjER,gBAAkC,sBAC3B,YAAcF,eAAeE,iBAAiBS,SAAS,sCAE9DV,MAAM,UAAYD,eAAeE,kBACd,IAAfK,MAAMC,OAAgC,IAAfD,MAAMC,QACrCD,MAAME,qCAGC,cAAcG,MAAM"}